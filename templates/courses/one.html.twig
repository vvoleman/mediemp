{% extends 'base.html.twig' %}

{% block title %}
	Course
{% endblock %}
{% block body %}
	<div class="container">
		<div class="row">
			<div class="col-4">
				<div class="card" style="width: 18rem;">
					<div class="card-body">
						<h5 class="card-title">
							Course edit
						</h5>
						<p class="card-text">
							<form method="POST">
								<input type="hidden" name="action" value="edit_course"/>

								<div class="mb-3">
									<label class="form-label">
										Name
									</label>
									<input type="text" class="form-control" disabled value="{{ course.id }}"></div>
								<div class="mb-3">
									<label class="form-label">
										Name
									</label>
									<input type="text" class="form-control" name="name" value="{{ course.name }}"></div>
								<div class="mb-3">
									<label class="form-label">
										Keywords
									</label>
									<input type="text" class="form-control" name="keywords" value="{{ course.keywords }}"></div>
								<div class="mb-3">
									<label class="form-label">
										Specialization
									</label>
									<input type="text" class="form-control" name="specialization" value="{{ course.specialization }}"></div>
								<div class="mb-3">
									<label class="form-label">
										Focus
									</label>
									<input type="text" class="form-control" name="focus" value="{{ course.focus }}"></div>

								<button type="submit" class="btn btn-primary">
									Submit
								</button>
							</form>
						</p>
					</div>
				</div>
			</div>
			<div class="col-8">
				<div class="card">
					<div class="card-body">
						<h5 class="card-title">
							Courses assigned to employers
						</h5>
						<p>
							<table class="table">
								<thead>
									<tr>
										<th scope="col">
											Employer
										</th>
										<th scope="col">
											Available appointemnts starts
										</th>
										<th>
											Actions
										</th>

									</tr>
								</thead>
								<tbody>
									{% for c in emp_course %}
										<tr>
											<td>
												{{ c.employer.name }}
											</td>
											<td></td>
											<td>
												<form method="POST">
													<input type="hidden" name="action" value="create_appointment"/>
													<input type="hidden" name="id" value="{{c.id}}"/>
													<input type="hidden" name="_csrf_token" value="{{ csrf_token('post-create_appointment') }}">
													<input type="Submit" class="btn btn-success btn-sm" value="New"/>
												</form>
											</td>

										</tr>
										{% for d in c.CourseAppointments() %}
											<tr>
												<td></td>
												<td>
													<a href="{{ path('app_courses_one_appointment', {"c_id":course.id, "id":d.id}) }}">
														{{ d.date|date('Y-m-d  H:i') }}
													</a>
													<small>
														(
														{{ d.courseRegistrations|length }}
														/
														{{ d.capacity }}
														)
													</small>

												</td>
												<td>
													<form method="POST">
														<input type="hidden" name="action" value="delete_appointment"/>
														<input type="hidden" name="id" value="{{d.id}}"/>
														<input type="hidden" name="_csrf_token" value="{{ csrf_token('post-create_appointment') }}">
														<input type="Submit" class="btn btn-danger btn-sm" value="Delete"/>
													</form>
												</td>
											</tr>
										{% endfor %}
										<tr></tr>
									{% endfor %}
								</tbody>
							</table>
						</p>
						<p>
							<form method="POST">
								<input type="hidden" name="action" value="adopt_course"/>
								<input type="hidden" name="_csrf_token" value="{{ csrf_token('post-create_appointment') }}">
								<select class="form-select" name="employer_id">
									<option selected disabled hidden>For employer</option>
									{% for e in emp_all %}
										<option value="{{ e.id }}">{{ e.name }}</option>
									{% endfor %}
								</select>
								<input type="Submit" class="btn btn-danger btn-sm" value="Adopt course"/>
							</form>
						</p>
					</div>
				</div>
			</div>
		</div>
	</p>
{% endblock %}
